from aiogram.utils.keyboard import InlineKeyboardBuilder, InlineKeyboardMarkup, InlineKeyboardButton

from core.models import channel as channel_db


def menu(channels: list[channel_db.Channel]) -> InlineKeyboardMarkup:
    builder = InlineKeyboardBuilder()
    
    
    
    
    # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ½Ğ°Ğ»Ğ°
    for channel in channels:
        # ĞĞ±Ñ€ĞµĞ·Ğ°ĞµĞ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ URL Ğ´Ğ»Ñ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
        display_url = channel.url
        if len(display_url) > 35:
            display_url = display_url[:32] + "..."
            
        builder.row(InlineKeyboardButton(
            text=f"ğŸ“º {display_url}", 
            callback_data=f"stats_channel_guid_{channel.guid}"
        ))
    
    # ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ½Ğ°Ğ·Ğ°Ğ´
    builder.row(InlineKeyboardButton(text="â—€ï¸ ĞĞ°Ğ·Ğ°Ğ´", callback_data="back_to_menu"))
    
    return builder.as_markup()